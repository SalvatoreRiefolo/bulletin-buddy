<div class="container mt-5">
  <h1 class="display-3 text-center">OVERVIEW</h1>
  <div class="container mt-5 px-5">
    <div class="row vert-line-div"></div>
    <div class="form-outline mb-4">
      <label class="form-label" for="postType">Select filter option</label>
      <select id="postType" (ngModelChange)="filter_change($event)" name="filter" class="form-control" [(ngModel)]="filter_option">
        <option value="ALL">Show ALL</option>
        <option *ngFor="let type of postTypes" value="{{type}}">
          Show {{type}}S
        </option>
      </select>
    </div>
  </div>
  <h1 class="display-3 text-center">OVERVIEW</h1>
  <div class="container mt-5 px-5">
    <div class="row vert-line-div"></div>
    <div class="form-outline mb-4">
      <label class="form-label" for="postType">Select filter option</label>
      <select id="postType" (ngModelChange)="filter_change($event)" name="filter" class="form-control" [(ngModel)]="filter_option">
        <option value="ALL">Show ALL</option>
        <option *ngFor="let type of postTypes" value="{{type}}">
          Show {{type}}S
        </option>
      </select>
    </div>
  </div>
</div>
<!-- TODO clean up code later -->
<div class="container mt-5">
  <div class="container mx-5">
    <div class="row mr-5" *ngFor="let item of posts">
      <!-- Source: https://stackoverflow.com/questions/62047190/how-can-i-change-content-page-based-on-mat-option-angular -->
      <ng-container [ngSwitch]="filter_option">
        <ng-container *ngSwitchCase="'ALL'">
          <ng-container *ngTemplateOutlet="all"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'OFFER'">
          <ng-container *ngTemplateOutlet="offers"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'REQUEST'">
          <ng-container *ngTemplateOutlet="requests"></ng-container>
        </ng-container>
      </ng-container>
      <ng-template #all>
        <a routerLink="/post/{{item.id}}" class="text-decoration-none">
          <div class="col-10 text-white post">
            <h3>{{item.title}}</h3>
            <p>{{item.publisherEmail}}</p>
          </div>
        </a>
        <div class="col-2"></div>
      </ng-template>
      <ng-template #offers>
        <a routerLink="/post/{{item.id}}" class="text-decoration-none" *ngIf="item.type.toString() == 'OFFER'">
          <div class="col-10 text-white post">
            <h3>{{item.title}}</h3>
            <p>{{item.publisherEmail}}</p>
          </div>
        </a>
        <div class="col-2"></div>
      </ng-template>
      <ng-template #requests>
        <a routerLink="/post/{{item.id}}" class="text-decoration-none" *ngIf="item.type.toString() == 'REQUEST'">
          <div class="col-10 text-white post">
            <h3>{{item.title}}</h3>
            <p>{{item.publisherEmail}}</p>
          </div>
        </a>
        <div class="col-2"></div>
      </ng-template>
    </div>
  </div>
</div>

<!-- TODO clean up code later -->
<div class="container mt-5">
  <div class="container mx-5">
    <div class="row mr-5" *ngFor="let item of posts">
      <!-- Source: https://stackoverflow.com/questions/62047190/how-can-i-change-content-page-based-on-mat-option-angular -->
      <ng-container [ngSwitch]="filter_option">
        <ng-container *ngSwitchCase="'ALL'">
          <ng-container *ngTemplateOutlet="all"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'OFFER'">
          <ng-container *ngTemplateOutlet="offers"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'REQUEST'">
          <ng-container *ngTemplateOutlet="requests"></ng-container>
        </ng-container>
      </ng-container>
      <ng-template #all>
        <a routerLink="/post/{{item.id}}" class="text-decoration-none">
          <div class="col-10 text-white post">
            <h3>{{item.title}}</h3>
            <p>{{item.publisherEmail}}</p>
          </div>
        </a>
        <div class="col-2"></div>
      </ng-template>
      <ng-template #offers>
        <a routerLink="/post/{{item.id}}" class="text-decoration-none" *ngIf="item.type.toString() == 'OFFER'">
          <div class="col-10 text-white post">
            <h3>{{item.title}}</h3>
            <p>{{item.publisherEmail}}</p>
          </div>
        </a>
        <div class="col-2"></div>
      </ng-template>
      <ng-template #requests>
        <a routerLink="/post/{{item.id}}" class="text-decoration-none" *ngIf="item.type.toString() == 'REQUEST'">
          <div class="col-10 text-white post">
            <h3>{{item.title}}</h3>
            <p>{{item.publisherEmail}}</p>
          </div>
        </a>
        <div class="col-2"></div>
      </ng-template>
    </div>
  </div>
</div>

<div class="container mt-5" *ngIf="(authenticationService.isLoggedIn())">
  <div class="container mx-5">
    <div class="row">
      <div class="col-3">
        <a routerLink="/add" class="text-decoration-none">
          <button class="btn btn-secondary">Add Offer</button>
        </a>
      </div>
    </div>
  </div>
</div>
